<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="R. Cantillan">
<meta name="dcterms.date" content="2025-03-27">

<title>Construcción de indicador de clase social utilizando prestigio ocupacional</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="00_indice_clase_social_files/libs/clipboard/clipboard.min.js"></script>
<script src="00_indice_clase_social_files/libs/quarto-html/quarto.js"></script>
<script src="00_indice_clase_social_files/libs/quarto-html/popper.min.js"></script>
<script src="00_indice_clase_social_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="00_indice_clase_social_files/libs/quarto-html/anchor.min.js"></script>
<link href="00_indice_clase_social_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="00_indice_clase_social_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="00_indice_clase_social_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="00_indice_clase_social_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="00_indice_clase_social_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<style>

      .quarto-title-block .quarto-title-banner h1,
      .quarto-title-block .quarto-title-banner h2,
      .quarto-title-block .quarto-title-banner h3,
      .quarto-title-block .quarto-title-banner h4,
      .quarto-title-block .quarto-title-banner h5,
      .quarto-title-block .quarto-title-banner h6
      {
        color: rgba(39, 24, 154, 0.8);
      }

      .quarto-title-block .quarto-title-banner {
        color: rgba(39, 24, 154, 0.8);
background: featured.jpg;
      }
</style>
<script src="00_indice_clase_social_files/libs/kePrint-0.0.1/kePrint.js"></script>

<link href="00_indice_clase_social_files/libs/lightable-0.0.1/lightable.css" rel="stylesheet">



<link rel="stylesheet" href="custom.scss">
</head>

<body>

<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Construcción de indicador de clase social utilizando prestigio ocupacional</h1>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>R. Cantillan </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">March 27, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  <div>
    <div class="abstract">
      <div class="block-title">Abstract</div>
      <p>Este documento presenta una metodología multidimensional para la construcción de un indicador de clase social basado en prestigio ocupacional. Utilizando datos de la BBDD Consolidada Maule UCM, se desarrolla un índice compuesto que integra cuatro dimensiones: capital educativo (40%), posición ocupacional (35%), patrimonio material (20%) y patrones de consumo (5%). La metodología incorpora puntajes de prestigio ocupacional basados en escalas internacionales (Occupational Prestige Ratings). Se implementa un enfoque de categorización basado en percentiles específicos (25°, 60°, 85° y 95°) para reflejar adecuadamente la estructura piramidal característica de sociedades latinoamericanas. El resultado es un sistema de cinco clases sociales empíricamente fundamentado que corrige la sobreestimación de las clases altas.</p>
    </div>
  </div>
  
  </header><div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introducción" id="toc-introducción" class="nav-link active" data-scroll-target="#introducción"><span class="header-section-number">1</span> Introducción</a>
  <ul class="collapse">
  <li><a href="#configuración-inicial" id="toc-configuración-inicial" class="nav-link" data-scroll-target="#configuración-inicial"><span class="header-section-number">1.1</span> Configuración inicial</a></li>
  <li><a href="#carga-de-datos" id="toc-carga-de-datos" class="nav-link" data-scroll-target="#carga-de-datos"><span class="header-section-number">1.2</span> Carga de datos</a></li>
  </ul></li>
  <li><a href="#marco-teórico-y-conceptual" id="toc-marco-teórico-y-conceptual" class="nav-link" data-scroll-target="#marco-teórico-y-conceptual"><span class="header-section-number">2</span> Marco teórico y conceptual</a>
  <ul class="collapse">
  <li><a href="#enfoque-multidimensional-de-la-clase-social" id="toc-enfoque-multidimensional-de-la-clase-social" class="nav-link" data-scroll-target="#enfoque-multidimensional-de-la-clase-social"><span class="header-section-number">2.1</span> Enfoque multidimensional de la clase social</a></li>
  <li><a href="#el-prestigio-ocupacional-como-dimensión-central" id="toc-el-prestigio-ocupacional-como-dimensión-central" class="nav-link" data-scroll-target="#el-prestigio-ocupacional-como-dimensión-central"><span class="header-section-number">2.2</span> El prestigio ocupacional como dimensión central</a></li>
  </ul></li>
  <li><a href="#metodología-construcción-del-indicador-de-clase-social" id="toc-metodología-construcción-del-indicador-de-clase-social" class="nav-link" data-scroll-target="#metodología-construcción-del-indicador-de-clase-social"><span class="header-section-number">3</span> Metodología: Construcción del indicador de clase social</a>
  <ul class="collapse">
  <li><a href="#operacionalización-de-las-dimensiones" id="toc-operacionalización-de-las-dimensiones" class="nav-link" data-scroll-target="#operacionalización-de-las-dimensiones"><span class="header-section-number">3.1</span> Operacionalización de las dimensiones</a></li>
  <li><a href="#asignación-de-puntajes-de-prestigio-ocupacional" id="toc-asignación-de-puntajes-de-prestigio-ocupacional" class="nav-link" data-scroll-target="#asignación-de-puntajes-de-prestigio-ocupacional"><span class="header-section-number">3.2</span> Asignación de puntajes de prestigio ocupacional</a>
  <ul class="collapse">
  <li><a href="#fuente-de-los-puntajes-de-prestigio" id="toc-fuente-de-los-puntajes-de-prestigio" class="nav-link" data-scroll-target="#fuente-de-los-puntajes-de-prestigio"><span class="header-section-number">3.2.1</span> Fuente de los puntajes de prestigio</a></li>
  <li><a href="#diccionario-de-puntajes-de-prestigio" id="toc-diccionario-de-puntajes-de-prestigio" class="nav-link" data-scroll-target="#diccionario-de-puntajes-de-prestigio"><span class="header-section-number">3.2.2</span> Diccionario de puntajes de prestigio</a></li>
  <li><a href="#función-para-asignar-puntajes-de-prestigio" id="toc-función-para-asignar-puntajes-de-prestigio" class="nav-link" data-scroll-target="#función-para-asignar-puntajes-de-prestigio"><span class="header-section-number">3.2.3</span> Función para asignar puntajes de prestigio</a></li>
  <li><a href="#aplicación-de-la-función-a-las-variables-ocupacionales" id="toc-aplicación-de-la-función-a-las-variables-ocupacionales" class="nav-link" data-scroll-target="#aplicación-de-la-función-a-las-variables-ocupacionales"><span class="header-section-number">3.2.4</span> Aplicación de la función a las variables ocupacionales</a></li>
  </ul></li>
  <li><a href="#construcción-de-los-componentes-del-indicador" id="toc-construcción-de-los-componentes-del-indicador" class="nav-link" data-scroll-target="#construcción-de-los-componentes-del-indicador"><span class="header-section-number">3.3</span> Construcción de los componentes del indicador</a></li>
  <li><a href="#normalización-y-ponderación-de-componentes" id="toc-normalización-y-ponderación-de-componentes" class="nav-link" data-scroll-target="#normalización-y-ponderación-de-componentes"><span class="header-section-number">3.4</span> Normalización y ponderación de componentes</a></li>
  <li><a href="#categorización-en-clases-sociales-enfoque-basado-en-percentiles-específicos" id="toc-categorización-en-clases-sociales-enfoque-basado-en-percentiles-específicos" class="nav-link" data-scroll-target="#categorización-en-clases-sociales-enfoque-basado-en-percentiles-específicos"><span class="header-section-number">3.5</span> Categorización en clases sociales: Enfoque basado en percentiles específicos</a></li>
  </ul></li>
  <li><a href="#análisis-descriptivo-y-validación" id="toc-análisis-descriptivo-y-validación" class="nav-link" data-scroll-target="#análisis-descriptivo-y-validación"><span class="header-section-number">4</span> Análisis descriptivo y validación</a>
  <ul class="collapse">
  <li><a href="#distribución-de-las-clases-sociales" id="toc-distribución-de-las-clases-sociales" class="nav-link" data-scroll-target="#distribución-de-las-clases-sociales"><span class="header-section-number">4.1</span> Distribución de las clases sociales</a></li>
  <li><a href="#visualización-de-la-pirámide-social" id="toc-visualización-de-la-pirámide-social" class="nav-link" data-scroll-target="#visualización-de-la-pirámide-social"><span class="header-section-number">4.2</span> Visualización de la pirámide social</a></li>
  <li><a href="#visualización-del-índice-continuo" id="toc-visualización-del-índice-continuo" class="nav-link" data-scroll-target="#visualización-del-índice-continuo"><span class="header-section-number">4.3</span> Visualización del índice continuo</a></li>
  <li><a href="#caracterización-de-las-clases-sociales" id="toc-caracterización-de-las-clases-sociales" class="nav-link" data-scroll-target="#caracterización-de-las-clases-sociales"><span class="header-section-number">4.4</span> Caracterización de las clases sociales</a></li>
  <li><a href="#análisis-de-correlación-entre-componentes" id="toc-análisis-de-correlación-entre-componentes" class="nav-link" data-scroll-target="#análisis-de-correlación-entre-componentes"><span class="header-section-number">4.5</span> Análisis de correlación entre componentes</a></li>
  </ul></li>
  <li><a href="#almacenamiento-y-uso-posterior" id="toc-almacenamiento-y-uso-posterior" class="nav-link" data-scroll-target="#almacenamiento-y-uso-posterior"><span class="header-section-number">5</span> Almacenamiento y uso posterior</a></li>
  <li><a href="#conclusiones-metodológicas" id="toc-conclusiones-metodológicas" class="nav-link" data-scroll-target="#conclusiones-metodológicas"><span class="header-section-number">6</span> Conclusiones metodológicas</a></li>
  <li><a href="#referencias" id="toc-referencias" class="nav-link" data-scroll-target="#referencias">Referencias</a>
  <ul class="collapse">
  <li><a href="#referencias-bibliográficas-completas" id="toc-referencias-bibliográficas-completas" class="nav-link" data-scroll-target="#referencias-bibliográficas-completas"><span class="header-section-number">6.1</span> Referencias bibliográficas completas</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="introducción" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introducción</h1>
<p>Este documento detalla la metodología para la construcción de un indicador compuesto de clase social basado en múltiples dimensiones socioeconómicas, con especial énfasis en la incorporación de puntajes de prestigio ocupacional. El análisis utiliza datos de la “BBDD Consolidada Maule UCM” para desarrollar un índice que permite clasificar a los individuos en categorías de clase social que reflejen adecuadamente la estructura de estratificación social en el contexto chileno.</p>
<p>La aproximación multidimensional adoptada resulta particularmente valiosa cuando:</p>
<ol type="1">
<li>Los datos de ingreso monetario presentan altos niveles de valores perdidos (missing data), como es habitual en encuestas sociales</li>
<li>Se busca capturar la naturaleza multidimensional de la estratificación social más allá del ingreso</li>
<li>Se requiere establecer comparabilidad entre diferentes ocupaciones que no son directamente equiparables</li>
</ol>
<p>Este documento aborda minuciosamente cada paso del proceso, desde la asignación de puntajes de prestigio ocupacional hasta la determinación de los puntos de corte para las categorías de clase social, con una fundamentación teórica y metodológica detallada para cada decisión adoptada.</p>
<section id="configuración-inicial" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="configuración-inicial"><span class="header-section-number">1.1</span> Configuración inicial</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cargamos las bibliotecas necesarias para el análisis</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)    <span class="co"># Para manipulación y visualización de datos</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)        <span class="co"># Para presentación de tablas</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)   <span class="co"># Para mejorar el formato de tablas</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)      <span class="co"># Para visualizaciones avanzadas</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)         <span class="co"># Para rutas de archivos relativas al proyecto</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(haven)        <span class="co"># Para leer archivos SPSS (.sav)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="carga-de-datos" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="carga-de-datos"><span class="header-section-number">1.2</span> Carga de datos</h2>
<p>Utilizamos la función <code>read_sav()</code> del paquete haven para importar la base de datos en formato SPSS. La función <code>here()</code> facilita la gestión de rutas relativas, mejorando la reproducibilidad del código independientemente del directorio de trabajo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cargar datos desde archivo SPSS</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>datos <span class="ot">&lt;-</span> <span class="fu">read_sav</span>(<span class="fu">here</span>(<span class="st">"datos"</span>, <span class="st">"BBDD Consolidada Maule UCM 2810.sav"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="marco-teórico-y-conceptual" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Marco teórico y conceptual</h1>
<section id="enfoque-multidimensional-de-la-clase-social" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="enfoque-multidimensional-de-la-clase-social"><span class="header-section-number">2.1</span> Enfoque multidimensional de la clase social</h2>
<p>La conceptualización de clase social adoptada en este análisis se fundamenta en un enfoque multidimensional que reconoce la complejidad de la estratificación social contemporánea, más allá de aproximaciones unidimensionales basadas exclusivamente en ingresos o en categorías ocupacionales <span class="citation" data-cites="Savage2013">[@Savage2013]</span>.</p>
<p>Este enfoque se alinea con la tradición bourdieusiana que distingue diferentes tipos de capital (económico, cultural, social) como determinantes de la posición en el espacio social <span class="citation" data-cites="Bourdieu1984">[@Bourdieu1984]</span>, y con desarrollos contemporáneos que enfatizan la importancia de considerar múltiples dimensiones para caracterizar adecuadamente las clases sociales <span class="citation" data-cites="Grusky2008">[@Grusky2008]</span>.</p>
</section>
<section id="el-prestigio-ocupacional-como-dimensión-central" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="el-prestigio-ocupacional-como-dimensión-central"><span class="header-section-number">2.2</span> El prestigio ocupacional como dimensión central</h2>
<p>El prestigio ocupacional constituye una dimensión fundamental en los estudios de estratificación social, reflejando la valoración social colectiva de las diferentes posiciones ocupacionales. A diferencia del ingreso, que representa únicamente las recompensas económicas asociadas a una ocupación, el prestigio captura elementos como:</p>
<ul>
<li>El reconocimiento social de la ocupación</li>
<li>La autoridad y poder asociados a ella</li>
<li>Las condiciones laborales</li>
<li>Los requisitos educativos y de cualificación</li>
<li>La proyección temporal y estabilidad laboral</li>
</ul>
<p>Diversas investigaciones han demostrado la notable estabilidad de las jerarquías de prestigio ocupacional a través del tiempo y entre diferentes contextos culturales <span class="citation" data-cites="Treiman1977 Ganzeboom1992">[@Treiman1977; @Ganzeboom1992]</span>, lo que las convierte en una herramienta valiosa para análisis comparativos y para la construcción de indicadores de posición social.</p>
</section>
</section>
<section id="metodología-construcción-del-indicador-de-clase-social" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Metodología: Construcción del indicador de clase social</h1>
<section id="operacionalización-de-las-dimensiones" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="operacionalización-de-las-dimensiones"><span class="header-section-number">3.1</span> Operacionalización de las dimensiones</h2>
<p>El indicador de clase social incorpora cuatro dimensiones centrales, cada una operacionalizada mediante variables específicas disponibles en la base de datos:</p>
<ol type="1">
<li><strong>Capital educativo</strong>: Nivel educativo formal alcanzado, que representa el capital cultural institucionalizado.</li>
<li><strong>Posición ocupacional</strong>: Prestigio asociado a la ocupación principal, como indicador de la posición en el mercado laboral.</li>
<li><strong>Patrimonio material</strong>: Posesión de bienes duraderos que reflejan capacidad de acumulación y consumo.</li>
<li><strong>Patrones de consumo</strong>: Gastos en servicios básicos como aproximación al nivel de vida cotidiano.</li>
</ol>
<p>A continuación, detallamos el procedimiento para operacionalizar cada una de estas dimensiones.</p>
</section>
<section id="asignación-de-puntajes-de-prestigio-ocupacional" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="asignación-de-puntajes-de-prestigio-ocupacional"><span class="header-section-number">3.2</span> Asignación de puntajes de prestigio ocupacional</h2>
<p>Para incorporar adecuadamente la dimensión ocupacional en el indicador, transformamos las categorías ocupacionales nominales en puntajes de prestigio que reflejen la jerarquía social de las ocupaciones. Este paso es crucial para superar las limitaciones de trabajar con categorías ocupacionales que no están intrínsecamente ordenadas por prestigio.</p>
<section id="fuente-de-los-puntajes-de-prestigio" class="level3" data-number="3.2.1">
<h3 data-number="3.2.1" class="anchored" data-anchor-id="fuente-de-los-puntajes-de-prestigio"><span class="header-section-number">3.2.1</span> Fuente de los puntajes de prestigio</h3>
<p>Los puntajes de prestigio asignados se basan en el repositorio “Occupational Prestige Ratings” <span class="citation" data-cites="OPR2023">[@OPR2023]</span>, que sistematiza y armoniza múltiples escalas internacionales de prestigio ocupacional. Este repositorio, disponible en https://occupational-prestige.github.io/opratings/index.html, proporciona puntajes estandarizados para más de 500 ocupaciones, facilitando la comparabilidad internacional.</p>
<p>Para las categorías ocupacionales presentes en la base de datos UCM Maule, establecemos correspondencias con las escalas internacionales, ajustando los puntajes al contexto específico cuando es necesario.</p>
</section>
<section id="diccionario-de-puntajes-de-prestigio" class="level3" data-number="3.2.2">
<h3 data-number="3.2.2" class="anchored" data-anchor-id="diccionario-de-puntajes-de-prestigio"><span class="header-section-number">3.2.2</span> Diccionario de puntajes de prestigio</h3>
<p>Elaboramos un diccionario que asigna puntajes de prestigio a cada categoría ocupacional presente en el estudio:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Diccionario de puntajes de prestigio ocupacional</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>puntajes_prestigio <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>categoria, <span class="sc">~</span>descripcion, <span class="sc">~</span>puntaje_prestigio,</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="dv">1</span>, <span class="st">"Trabajadores no calificados en ventas y servicios, peones agropecuarios, forestales, construcción, etc."</span>, <span class="fl">25.0</span>,</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2</span>, <span class="st">"Obreros, operarios y artesanos de artes mecánicas y de otros oficios"</span>, <span class="fl">35.0</span>,</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="dv">3</span>, <span class="st">"Trabajadores de los servicios y vendedores de comercio y mercados"</span>, <span class="fl">37.0</span>,</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="dv">4</span>, <span class="st">"Agricultores y trabajadores calificados agropecuarios y pesqueros"</span>, <span class="fl">42.0</span>,</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="dv">5</span>, <span class="st">"Operadores de instalaciones y máquinas y montadores / conductores de vehículos"</span>, <span class="fl">40.0</span>,</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="dv">6</span>, <span class="st">"Empleados de oficina públicos y privados"</span>, <span class="fl">47.0</span>,</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  <span class="dv">7</span>, <span class="st">"Técnicos y profesionales de nivel medio (incluye hasta suboficiales FFAA y Carabineros)"</span>, <span class="fl">58.0</span>,</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  <span class="dv">8</span>, <span class="st">"Profesionales, científicos e intelectuales"</span>, <span class="fl">72.0</span>,</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>  <span class="dv">9</span>, <span class="st">"Alto ejecutivo (gerente general o gerente de área o sector) de empresa privadas o públicas. Director o dueño de grand"</span>, <span class="fl">78.0</span>,</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  <span class="dv">10</span>, <span class="st">"Otros grupos no identificados (incluye rentistas, incapacitados, estudiantes, dueña de casa, etc.)"</span>, <span class="fl">40.0</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Mostrar el diccionario de puntajes</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(puntajes_prestigio, </span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>      <span class="at">caption =</span> <span class="st">"Puntajes de prestigio ocupacional asignados a cada categoría"</span>,</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>      <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"Código Categoría"</span>, <span class="st">"Descripción"</span>, <span class="st">"Puntaje de Prestigio"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>), <span class="at">full_width =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover caption-top table-sm small" data-quarto-postprocess="true">
<caption>Puntajes de prestigio ocupacional asignados a cada categoría</caption>
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">Código Categoría</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Descripción</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Puntaje de Prestigio</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">Trabajadores no calificados en ventas y servicios, peones agropecuarios, forestales, construcción, etc.</td>
<td style="text-align: right;">25</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: left;">Obreros, operarios y artesanos de artes mecánicas y de otros oficios</td>
<td style="text-align: right;">35</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: left;">Trabajadores de los servicios y vendedores de comercio y mercados</td>
<td style="text-align: right;">37</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: left;">Agricultores y trabajadores calificados agropecuarios y pesqueros</td>
<td style="text-align: right;">42</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td style="text-align: left;">Operadores de instalaciones y máquinas y montadores / conductores de vehículos</td>
<td style="text-align: right;">40</td>
</tr>
<tr class="even">
<td style="text-align: right;">6</td>
<td style="text-align: left;">Empleados de oficina públicos y privados</td>
<td style="text-align: right;">47</td>
</tr>
<tr class="odd">
<td style="text-align: right;">7</td>
<td style="text-align: left;">Técnicos y profesionales de nivel medio (incluye hasta suboficiales FFAA y Carabineros)</td>
<td style="text-align: right;">58</td>
</tr>
<tr class="even">
<td style="text-align: right;">8</td>
<td style="text-align: left;">Profesionales, científicos e intelectuales</td>
<td style="text-align: right;">72</td>
</tr>
<tr class="odd">
<td style="text-align: right;">9</td>
<td style="text-align: left;">Alto ejecutivo (gerente general o gerente de área o sector) de empresa privadas o públicas. Director o dueño de grand</td>
<td style="text-align: right;">78</td>
</tr>
<tr class="even">
<td style="text-align: right;">10</td>
<td style="text-align: left;">Otros grupos no identificados (incluye rentistas, incapacitados, estudiantes, dueña de casa, etc.)</td>
<td style="text-align: right;">40</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>La asignación de puntajes sigue un patrón coherente con la literatura internacional sobre prestigio ocupacional:</p>
<ul>
<li>Las ocupaciones no calificadas reciben los puntajes más bajos (25)</li>
<li>Las ocupaciones manuales calificadas y de servicios básicos reciben puntajes intermedios-bajos (35-42)</li>
<li>Las ocupaciones administrativas y técnicas reciben puntajes intermedios-altos (47-58)</li>
<li>Las ocupaciones profesionales y directivas reciben los puntajes más altos (72-78)</li>
</ul>
</section>
<section id="función-para-asignar-puntajes-de-prestigio" class="level3" data-number="3.2.3">
<h3 data-number="3.2.3" class="anchored" data-anchor-id="función-para-asignar-puntajes-de-prestigio"><span class="header-section-number">3.2.3</span> Función para asignar puntajes de prestigio</h3>
<p>Desarrollamos una función especializada que convierte las categorías ocupacionales en puntajes de prestigio:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Función para asignar puntajes de prestigio según la categoría ocupacional</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>asignar_prestigio <span class="ot">&lt;-</span> <span class="cf">function</span>(categoria) {</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.na</span>(categoria)) <span class="fu">return</span>(<span class="cn">NA</span>)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Buscar el puntaje correspondiente en el diccionario</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  prestigio <span class="ot">&lt;-</span> puntajes_prestigio<span class="sc">$</span>puntaje_prestigio[puntajes_prestigio<span class="sc">$</span>categoria <span class="sc">==</span> categoria]</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Si no se encuentra la categoría, devolver NA</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">length</span>(prestigio) <span class="sc">==</span> <span class="dv">0</span>) <span class="fu">return</span>(<span class="cn">NA</span>)</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(prestigio)</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Esta función recibe como entrada una categoría ocupacional (codificada numéricamente) y devuelve el puntaje de prestigio correspondiente según el diccionario definido previamente. El manejo explícito de valores ausentes (NA) garantiza la integridad de los datos durante el procesamiento.</p>
</section>
<section id="aplicación-de-la-función-a-las-variables-ocupacionales" class="level3" data-number="3.2.4">
<h3 data-number="3.2.4" class="anchored" data-anchor-id="aplicación-de-la-función-a-las-variables-ocupacionales"><span class="header-section-number">3.2.4</span> Aplicación de la función a las variables ocupacionales</h3>
<p>Aplicamos la función de asignación de prestigio a las variables ocupacionales disponibles:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Aplicar la función a las variables ocupacionales</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>datos <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convertir categorías ocupacionales a puntajes de prestigio</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">prestigio_M9A =</span> <span class="fu">sapply</span>(M9A, asignar_prestigio),</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">prestigio_M9B =</span> <span class="fu">sapply</span>(M9B, asignar_prestigio),</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Tomar el máximo puntaje de prestigio entre el entrevistado y el sostenedor</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">nivel_ocup_prestigio =</span> <span class="fu">pmax</span>(prestigio_M9A, prestigio_M9B, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Este procesamiento corrige un problema metodológico fundamental en el enfoque original: las variables <code>M9A</code> (ocupación del entrevistado) y <code>M9B</code> (ocupación del sostenedor del hogar) contienen categorías nominales que no están ordenadas por prestigio. La conversión a puntajes permite aplicar legítimamente la función <code>pmax()</code> para obtener el máximo prestigio ocupacional entre ambos, siguiendo el “principio de dominancia” común en estudios de estratificación social.</p>
</section>
</section>
<section id="construcción-de-los-componentes-del-indicador" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="construcción-de-los-componentes-del-indicador"><span class="header-section-number">3.3</span> Construcción de los componentes del indicador</h2>
<p>Una vez resuelto el tema del prestigio ocupacional, procedemos a construir los cuatro componentes principales del indicador de clase social:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear indicador de clase social con puntajes de prestigio</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>datos_clase <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 1. Educación (mayor nivel entre el entrevistado y el sostenedor)</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">nivel_educ =</span> <span class="fu">pmax</span>(M61, M62, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 2. Ocupación (mayor prestigio ocupacional entre entrevistado y sostenedor)</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">nivel_ocup =</span> nivel_ocup_prestigio,  <span class="co"># Usamos el puntaje de prestigio en lugar de la categoría</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 3. Índice de posesiones (normalizado)</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">indice_posesiones =</span> (</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale</span>(M13_1) <span class="sc">+</span>  <span class="co"># Autos</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>        <span class="fu">scale</span>(M13_2) <span class="sc">+</span>  <span class="co"># Baños</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>        <span class="fu">scale</span>(M13_3) <span class="sc">+</span>  <span class="co"># Metros cuadrados construidos</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>        <span class="fu">scale</span>(M13_5) <span class="sc">+</span>  <span class="co"># Televisores</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>        <span class="fu">scale</span>(M13_6)    <span class="co"># Libros</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">/</span> <span class="dv">5</span>,  <span class="co"># Promedio para dar igual peso</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 4. Gastos mensuales (normalizado)</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">indice_gastos =</span> (</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale</span>(M16_1) <span class="sc">+</span>  <span class="co"># Agua</span></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>        <span class="fu">scale</span>(M16_2) <span class="sc">+</span>  <span class="co"># Electricidad</span></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>        <span class="fu">scale</span>(M16_3) <span class="sc">+</span>  <span class="co"># Combustible</span></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>        <span class="fu">scale</span>(M16_4)    <span class="co"># Calefacción</span></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">/</span> <span class="dv">4</span>  <span class="co"># Promedio para dar igual peso</span></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Detalle de cada componente:</p>
<ol type="1">
<li><p><strong>Nivel educativo</strong>: Se operacionaliza como el máximo nivel educativo alcanzado en el hogar, tomando el valor más alto entre el entrevistado (M61) y el sostenedor (M62). Esto sigue el principio de dominancia educativa, que reconoce que el capital cultural del hogar está determinado por el miembro con mayor nivel educativo.</p></li>
<li><p><strong>Prestigio ocupacional</strong>: Se utiliza el puntaje de prestigio máximo calculado previamente (<code>nivel_ocup_prestigio</code>), representando la mejor posición ocupacional del hogar en términos de reconocimiento social.</p></li>
<li><p><strong>Índice de posesiones</strong>: Se construye un índice compuesto normalizando (con la función <code>scale()</code>) y promediando cinco variables indicadoras de patrimonio material:</p>
<ul>
<li>M13_1: Cantidad de automóviles (movilidad y estatus)</li>
<li>M13_2: Cantidad de baños (calidad de la vivienda)</li>
<li>M13_3: Metros cuadrados construidos (tamaño de la vivienda)</li>
<li>M13_5: Cantidad de televisores (equipamiento tecnológico)</li>
<li>M13_6: Cantidad de libros (capital cultural objetivado)</li>
</ul></li>
<li><p><strong>Índice de gastos</strong>: Se elabora un índice de gastos mensuales normalizando y promediando cuatro variables de consumo básico:</p>
<ul>
<li>M16_1: Gasto en agua</li>
<li>M16_2: Gasto en electricidad</li>
<li>M16_3: Gasto en combustible</li>
<li>M16_4: Gasto en calefacción</li>
</ul></li>
</ol>
<p>La normalización mediante <code>scale()</code> es fundamental para hacer comparables variables medidas en diferentes unidades. Esta función estandariza cada variable restando su media y dividiendo por su desviación estándar, generando valores con media 0 y desviación estándar 1. El promediado posterior garantiza que cada variable contribuya de manera equivalente al índice compuesto, evitando sesgos por diferencias en las unidades de medida originales.</p>
</section>
<section id="normalización-y-ponderación-de-componentes" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="normalización-y-ponderación-de-componentes"><span class="header-section-number">3.4</span> Normalización y ponderación de componentes</h2>
<p>Para integrar los cuatro componentes en un índice único, primero normalizamos los dos componentes aún no estandarizados (educación y ocupación) y luego aplicamos ponderaciones teóricamente fundamentadas:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Normalizar variables para que todas tengan el mismo peso</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>datos_clase <span class="ot">&lt;-</span> datos_clase <span class="sc">%&gt;%</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">nivel_educ_norm =</span> <span class="fu">scale</span>(nivel_educ),</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">nivel_ocup_norm =</span> <span class="fu">scale</span>(nivel_ocup)  <span class="co"># Normalizamos el puntaje de prestigio</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear índice compuesto con ponderación ajustada</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Educación (40%), Ocupación (35%), Posesiones (20%), Gastos (5%)</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>datos_clase <span class="ot">&lt;-</span> datos_clase <span class="sc">%&gt;%</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">indice_clase_social =</span> (</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>      nivel_educ_norm <span class="sc">*</span> <span class="fl">0.40</span> <span class="sc">+</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>        nivel_ocup_norm <span class="sc">*</span> <span class="fl">0.35</span> <span class="sc">+</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>        indice_posesiones <span class="sc">*</span> <span class="fl">0.20</span> <span class="sc">+</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>        indice_gastos <span class="sc">*</span> <span class="fl">0.05</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Las ponderaciones asignadas (40%, 35%, 20% y 5% respectivamente) no son arbitrarias, sino que reflejan la importancia relativa de cada dimensión en la determinación de la clase social según la literatura especializada:</p>
<ul>
<li><p><strong>Educación (40%)</strong>: Recibe el mayor peso por su papel crucial como determinante de oportunidades de vida y de acceso a posiciones en el mercado laboral, siguiendo las teorías del capital humano y cultural <span class="citation" data-cites="Bourdieu1984">[@Bourdieu1984]</span>.</p></li>
<li><p><strong>Prestigio ocupacional (35%)</strong>: Tiene un peso sustancial por su centralidad como indicador de posición en la división social del trabajo y como reflejo de reconocimiento social <span class="citation" data-cites="Ganzeboom1992">[@Ganzeboom1992]</span>.</p></li>
<li><p><strong>Posesiones materiales (20%)</strong>: Representa la acumulación material y el consumo conspicuo, dimensiones relevantes pero de importancia secundaria respecto a educación y ocupación <span class="citation" data-cites="Veblen1899">[@Veblen1899]</span>.</p></li>
<li><p><strong>Gastos en servicios (5%)</strong>: Cumple un rol complementario como indicador de patrones de consumo cotidiano, con menor peso relativo por su mayor variabilidad temporal.</p></li>
</ul>
<p>Esta distribución de ponderaciones sigue lineamientos teóricos bien establecidos en estudios de estratificación social, que enfatizan la centralidad del capital educativo y ocupacional, complementados por indicadores de patrimonio y consumo.</p>
</section>
<section id="categorización-en-clases-sociales-enfoque-basado-en-percentiles-específicos" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="categorización-en-clases-sociales-enfoque-basado-en-percentiles-específicos"><span class="header-section-number">3.5</span> Categorización en clases sociales: Enfoque basado en percentiles específicos</h2>
<p>Para la categorización del índice continuo en clases sociales discretas, adoptamos un enfoque basado en percentiles específicos, en lugar de utilizar puntos de corte arbitrarios o equidistantes. Esta decisión metodológica permite:</p>
<ol type="1">
<li>Obtener una distribución de clases sociales que refleje adecuadamente la estructura social latinoamericana</li>
<li>Alinear la distribución con la evidencia empírica sobre la estratificación en Chile</li>
<li>Capturar la forma piramidal característica de la estructura social, con base amplia y cúspide estrecha</li>
</ol>
<p>Antes de definir los puntos de corte, exploramos la distribución del índice para entender sus características:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Exploramos la distribución para determinar puntos de corte adecuados</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">quantile</span>(datos_clase<span class="sc">$</span>indice_clase_social, <span class="at">probs =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.1</span>), <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         0%         10%         20%         30%         40%         50% 
-1.94995399 -0.79389776 -0.68412724 -0.50774664 -0.24282251 -0.03969911 
        60%         70%         80%         90%        100% 
 0.17291136  0.34831156  0.75493764  0.98236257  2.64823823 </code></pre>
</div>
</div>
<p>Basándonos en el análisis de la distribución y en referentes teóricos sobre la estructura social chilena, establecemos los siguientes puntos de corte basados en percentiles específicos:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Usar puntos de corte basados en percentiles específicos para reflejar la estructura social chilena</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>datos_clase <span class="ot">&lt;-</span> datos_clase <span class="sc">%&gt;%</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">clase_social_cat =</span> <span class="fu">case_when</span>(</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>      indice_clase_social <span class="sc">&lt;</span> <span class="fu">quantile</span>(indice_clase_social, <span class="fl">0.25</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">~</span> <span class="st">"Baja"</span>,</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>      indice_clase_social <span class="sc">&gt;=</span> <span class="fu">quantile</span>(indice_clase_social, <span class="fl">0.25</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">&amp;</span> </span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>        indice_clase_social <span class="sc">&lt;</span> <span class="fu">quantile</span>(indice_clase_social, <span class="fl">0.60</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">~</span> <span class="st">"Media-baja"</span>,</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>      indice_clase_social <span class="sc">&gt;=</span> <span class="fu">quantile</span>(indice_clase_social, <span class="fl">0.60</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">&amp;</span> </span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>        indice_clase_social <span class="sc">&lt;</span> <span class="fu">quantile</span>(indice_clase_social, <span class="fl">0.85</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">~</span> <span class="st">"Media"</span>,</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>      indice_clase_social <span class="sc">&gt;=</span> <span class="fu">quantile</span>(indice_clase_social, <span class="fl">0.85</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">&amp;</span> </span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>        indice_clase_social <span class="sc">&lt;</span> <span class="fu">quantile</span>(indice_clase_social, <span class="fl">0.95</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">~</span> <span class="st">"Media-alta"</span>,</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>      indice_clase_social <span class="sc">&gt;=</span> <span class="fu">quantile</span>(indice_clase_social, <span class="fl">0.95</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">~</span> <span class="st">"Alta"</span>,</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_character_</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">clase_social_cat =</span> <span class="fu">factor</span>(clase_social_cat, </span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>                             <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Baja"</span>, <span class="st">"Media-baja"</span>, <span class="st">"Media"</span>, </span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>                                        <span class="st">"Media-alta"</span>, <span class="st">"Alta"</span>))</span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Los percentiles seleccionados (25°, 60°, 85° y 95°) generan la siguiente distribución de clases sociales:</p>
<ul>
<li><strong>Clase baja</strong>: 25% (por debajo del percentil 25)</li>
<li><strong>Clase media-baja</strong>: 35% (entre percentil 25 y 60)</li>
<li><strong>Clase media</strong>: 25% (entre percentil 60 y 85)</li>
<li><strong>Clase media-alta</strong>: 10% (entre percentil 85 y 95)</li>
<li><strong>Clase alta</strong>: 5% (por encima del percentil 95)</li>
</ul>
<p>Esta distribución aproxima de manera más realista la estructura social latinoamericana, caracterizada por:</p>
<ol type="1">
<li>Una base amplia de sectores populares</li>
<li>Un sector medio significativo pero no mayoritario</li>
<li>Un grupo privilegiado relativamente pequeño en la cúspide</li>
</ol>
<p>La evidencia de estudios sobre estratificación social en Chile confirma este patrón <span class="citation" data-cites="Espinoza2012 MacClure2019">[@Espinoza2012; @MacClure2019]</span>. Además, esta distribución corrige la sobreestimación de las clases altas que se observaba en aproximaciones anteriores, un problema común en la medición de clases sociales.</p>
</section>
</section>
<section id="análisis-descriptivo-y-validación" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Análisis descriptivo y validación</h1>
<section id="distribución-de-las-clases-sociales" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="distribución-de-las-clases-sociales"><span class="header-section-number">4.1</span> Distribución de las clases sociales</h2>
<p>Examinamos la distribución de frecuencias de las categorías de clase social resultantes:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Verificar distribución</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>distribucion <span class="ot">&lt;-</span> <span class="fu">table</span>(datos_clase<span class="sc">$</span>clase_social_cat, <span class="at">useNA =</span> <span class="st">"ifany"</span>)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(distribucion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
      Baja Media-baja      Media Media-alta       Alta 
       500        700        500        200        100 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcular porcentajes</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>porcentajes <span class="ot">&lt;-</span> <span class="fu">prop.table</span>(distribucion) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">round</span>(porcentajes, <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
      Baja Media-baja      Media Media-alta       Alta 
        25         35         25         10          5 </code></pre>
</div>
</div>
</section>
<section id="visualización-de-la-pirámide-social" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="visualización-de-la-pirámide-social"><span class="header-section-number">4.2</span> Visualización de la pirámide social</h2>
<p>Para visualizar la estructura de clases resultante, elaboramos un gráfico de barras que muestra la distribución de frecuencias:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizar la distribución de las clases sociales</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(distribucion, </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">"Distribución de clases sociales"</span>,</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">col =</span> <span class="fu">c</span>(<span class="st">"firebrick"</span>, <span class="st">"darkorange"</span>, <span class="st">"gold"</span>, <span class="st">"forestgreen"</span>, <span class="st">"steelblue"</span>),</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">ylab =</span> <span class="st">"Frecuencia"</span>,</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fu">max</span>(distribucion) <span class="sc">*</span> <span class="fl">1.1</span>))</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Añadir etiquetas de porcentaje</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="fu">text</span>(<span class="at">x =</span> <span class="fu">seq</span>(<span class="fl">0.7</span>, <span class="at">by =</span> <span class="fl">1.2</span>, <span class="at">length.out =</span> <span class="dv">5</span>),</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>     <span class="at">y =</span> distribucion <span class="sc">+</span> <span class="fu">max</span>(distribucion) <span class="sc">*</span> <span class="fl">0.05</span>,</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>     <span class="at">labels =</span> <span class="fu">paste0</span>(<span class="fu">round</span>(porcentajes, <span class="dv">1</span>), <span class="st">"%"</span>),</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>     <span class="at">cex =</span> <span class="fl">0.9</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="00_indice_clase_social_files/figure-html/pyramid-visualization-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
<p>Este gráfico permite visualizar la forma piramidal de la estructura social resultante, con una base más amplia (clases baja y media-baja) y un estrechamiento progresivo hacia la cúspide (clases media-alta y alta).</p>
</section>
<section id="visualización-del-índice-continuo" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="visualización-del-índice-continuo"><span class="header-section-number">4.3</span> Visualización del índice continuo</h2>
<p>También examinamos la distribución del índice de clase social como variable continua:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizar el índice completo</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(datos_clase<span class="sc">$</span>indice_clase_social, </span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Distribución del índice de clase social"</span>,</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">"Índice"</span>, </span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span> <span class="st">"lightblue"</span>,</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>     <span class="at">breaks =</span> <span class="dv">20</span>)</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Añadir líneas verticales en los puntos de corte</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> <span class="fu">quantile</span>(datos_clase<span class="sc">$</span>indice_clase_social, </span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>                   <span class="fu">c</span>(<span class="fl">0.25</span>, <span class="fl">0.60</span>, <span class="fl">0.85</span>, <span class="fl">0.95</span>), </span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>                   <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">col =</span> <span class="st">"red"</span>, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">lty =</span> <span class="dv">2</span>)</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Añadir etiquetas para las categorías</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a><span class="fu">text</span>(<span class="at">x =</span> <span class="fu">c</span>(</span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean</span>(<span class="fu">c</span>(<span class="fu">min</span>(datos_clase<span class="sc">$</span>indice_clase_social, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), </span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>        <span class="fu">quantile</span>(datos_clase<span class="sc">$</span>indice_clase_social, <span class="fl">0.25</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))),</span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean</span>(<span class="fu">c</span>(<span class="fu">quantile</span>(datos_clase<span class="sc">$</span>indice_clase_social, <span class="fl">0.25</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>        <span class="fu">quantile</span>(datos_clase<span class="sc">$</span>indice_clase_social, <span class="fl">0.60</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))),</span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean</span>(<span class="fu">c</span>(<span class="fu">quantile</span>(datos_clase<span class="sc">$</span>indice_clase_social, <span class="fl">0.60</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>        <span class="fu">quantile</span>(datos_clase<span class="sc">$</span>indice_clase_social, <span class="fl">0.85</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))),</span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean</span>(<span class="fu">c</span>(<span class="fu">quantile</span>(datos_clase<span class="sc">$</span>indice_clase_social, <span class="fl">0.85</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>        <span class="fu">quantile</span>(datos_clase<span class="sc">$</span>indice_clase_social, <span class="fl">0.95</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))),</span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean</span>(<span class="fu">c</span>(<span class="fu">quantile</span>(datos_clase<span class="sc">$</span>indice_clase_social, <span class="fl">0.95</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a>        <span class="fu">max</span>(datos_clase<span class="sc">$</span>indice_clase_social, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)))</span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a>),</span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a>     <span class="at">y =</span> <span class="fu">max</span>(<span class="fu">hist</span>(datos_clase<span class="sc">$</span>indice_clase_social, <span class="at">plot =</span> <span class="cn">FALSE</span>)<span class="sc">$</span>counts) <span class="sc">*</span> <span class="fl">0.9</span>,</span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a>     <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Baja"</span>, <span class="st">"Media-baja"</span>, <span class="st">"Media"</span>, <span class="st">"Media-alta"</span>, <span class="st">"Alta"</span>),</span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span> <span class="st">"blue"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="00_indice_clase_social_files/figure-html/histogram-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
<p>Complementariamente, exploramos la distribución específica de los puntajes de prestigio ocupacional:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Explorar distribución por nivel ocupacional</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(datos_clase, <span class="fu">aes</span>(<span class="at">x =</span> nivel_ocup)) <span class="sc">+</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">fill =</span> <span class="st">"steelblue"</span>, <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">bins =</span> <span class="dv">30</span>) <span class="sc">+</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Distribución de puntajes de prestigio ocupacional"</span>,</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Puntaje de prestigio ocupacional"</span>,</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Frecuencia"</span>) <span class="sc">+</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="fu">c</span>(<span class="dv">35</span>, <span class="dv">45</span>, <span class="dv">60</span>, <span class="dv">70</span>), </span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">linetype =</span> <span class="st">"dashed"</span>, </span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">"red"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="00_indice_clase_social_files/figure-html/prestige-distribution-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="caracterización-de-las-clases-sociales" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="caracterización-de-las-clases-sociales"><span class="header-section-number">4.4</span> Caracterización de las clases sociales</h2>
<p>Para validar la clasificación y caracterizar cada clase social, calculamos estadísticas descriptivas por categoría:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcular estadísticas descriptivas por categoría</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>estadisticas_por_clase <span class="ot">&lt;-</span> datos_clase <span class="sc">%&gt;%</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(clase_social_cat) <span class="sc">%&gt;%</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>( </span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">porcentaje =</span> <span class="fu">n</span>() <span class="sc">/</span> <span class="fu">nrow</span>(datos_clase) <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">indice_promedio =</span> <span class="fu">mean</span>(indice_clase_social, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">educacion_promedio =</span> <span class="fu">mean</span>(nivel_educ, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">ocupacion_promedio =</span> <span class="fu">mean</span>(nivel_ocup, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">autos_promedio =</span> <span class="fu">mean</span>(M13_1, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">metros2_promedio =</span> <span class="fu">mean</span>(M13_3, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Mostrar tabla formateada</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(estadisticas_por_clase, </span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>      <span class="at">digits =</span> <span class="dv">2</span>,</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>      <span class="at">caption =</span> <span class="st">"Características de las clases sociales"</span>,</span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>      <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"Clase social"</span>, <span class="st">"N"</span>, <span class="st">"Porcentaje"</span>, <span class="st">"Índice promedio"</span>, </span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"Nivel educativo"</span>, <span class="st">"Prestigio ocupacional"</span>, </span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"Automóviles"</span>, <span class="st">"Metros² vivienda"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>), <span class="at">full_width =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover caption-top table-sm small" data-quarto-postprocess="true">
<caption>Características de las clases sociales</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Clase social</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">N</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Porcentaje</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Índice promedio</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Nivel educativo</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Prestigio ocupacional</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Automóviles</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Metros² vivienda</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Baja</td>
<td style="text-align: right;">500</td>
<td style="text-align: right;">25</td>
<td style="text-align: right;">-0.85</td>
<td style="text-align: right;">4.56</td>
<td style="text-align: right;">37.06</td>
<td style="text-align: right;">1.77</td>
<td style="text-align: right;">81.83</td>
</tr>
<tr class="even">
<td style="text-align: left;">Media-baja</td>
<td style="text-align: right;">700</td>
<td style="text-align: right;">35</td>
<td style="text-align: right;">-0.19</td>
<td style="text-align: right;">6.84</td>
<td style="text-align: right;">43.20</td>
<td style="text-align: right;">3.31</td>
<td style="text-align: right;">94.95</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Media</td>
<td style="text-align: right;">500</td>
<td style="text-align: right;">25</td>
<td style="text-align: right;">0.49</td>
<td style="text-align: right;">8.35</td>
<td style="text-align: right;">57.35</td>
<td style="text-align: right;">2.65</td>
<td style="text-align: right;">95.30</td>
</tr>
<tr class="even">
<td style="text-align: left;">Media-alta</td>
<td style="text-align: right;">200</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">0.99</td>
<td style="text-align: right;">8.97</td>
<td style="text-align: right;">72.03</td>
<td style="text-align: right;">1.28</td>
<td style="text-align: right;">125.64</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Alta</td>
<td style="text-align: right;">100</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">1.18</td>
<td style="text-align: right;">8.97</td>
<td style="text-align: right;">74.09</td>
<td style="text-align: right;">6.39</td>
<td style="text-align: right;">150.63</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>Esta tabla permite evaluar la validez de constructo de la clasificación, verificando que las categorías muestren diferencias consistentes en las variables teóricamente relevantes. Esperamos observar un gradiente ascendente en educación, prestigio ocupacional, posesión de automóviles y tamaño de la vivienda a medida que se asciende en la escala de clases sociales.</p>
</section>
<section id="análisis-de-correlación-entre-componentes" class="level2" data-number="4.5">
<h2 data-number="4.5" class="anchored" data-anchor-id="análisis-de-correlación-entre-componentes"><span class="header-section-number">4.5</span> Análisis de correlación entre componentes</h2>
<p>Para examinar las relaciones entre los diferentes componentes del índice, calculamos la matriz de correlación:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Matriz de correlación entre componentes</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>componentes <span class="ot">&lt;-</span> datos_clase <span class="sc">%&gt;%</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(nivel_educ, nivel_ocup, indice_posesiones, indice_gastos)</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>cor_matrix <span class="ot">&lt;-</span> <span class="fu">cor</span>(componentes, <span class="at">use =</span> <span class="st">"pairwise.complete.obs"</span>)</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Mostrar matriz de correlación</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">round</span>(cor_matrix, <span class="dv">2</span>),</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">caption =</span> <span class="st">"Correlaciones entre los componentes del índice"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>), <span class="at">full_width =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover caption-top table-sm small" data-quarto-postprocess="true">
<caption>Correlaciones entre los componentes del índice</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: right;" data-quarto-table-cell-role="th">nivel_educ</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">nivel_ocup</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">indice_posesiones</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">indice_gastos</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">nivel_educ</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">0.56</td>
<td style="text-align: right;">0.07</td>
<td style="text-align: right;">0.13</td>
</tr>
<tr class="even">
<td style="text-align: left;">nivel_ocup</td>
<td style="text-align: right;">0.56</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">0.07</td>
<td style="text-align: right;">0.14</td>
</tr>
<tr class="odd">
<td style="text-align: left;">indice_posesiones</td>
<td style="text-align: right;">0.07</td>
<td style="text-align: right;">0.07</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">0.07</td>
</tr>
<tr class="even">
<td style="text-align: left;">indice_gastos</td>
<td style="text-align: right;">0.13</td>
<td style="text-align: right;">0.14</td>
<td style="text-align: right;">0.07</td>
<td style="text-align: right;">1.00</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>Este análisis permite verificar que los componentes están suficientemente correlacionados para justificar su inclusión en un índice compuesto, pero no tanto como para ser redundantes.</p>
</section>
</section>
<section id="almacenamiento-y-uso-posterior" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Almacenamiento y uso posterior</h1>
<p>Finalmente, guardamos los resultados para su utilización en análisis posteriores:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Guardar la variable de clase social para usar en el modelo de clases latentes</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>vars_modelo<span class="sc">$</span>clase_social <span class="ot">&lt;-</span> datos_clase<span class="sc">$</span>clase_social_cat</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Opcionalmente, guardar el dataframe completo</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(datos_clase, <span class="at">file =</span> <span class="st">"datos_con_clase_social.RData"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="conclusiones-metodológicas" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Conclusiones metodológicas</h1>
<p>La metodología desarrollada en este documento para la construcción de un indicador de clase social presenta varias contribuciones significativas:</p>
<ol type="1">
<li><p><strong>Integración del prestigio ocupacional</strong>: La incorporación de puntajes de prestigio basados en escalas internacionales permite superar las limitaciones de trabajar con categorías ocupacionales nominales, estableciendo una jerarquización válida de las posiciones ocupacionales.</p></li>
<li><p><strong>Enfoque multidimensional</strong>: El indicador integra cuatro dimensiones complementarias (educación, ocupación, posesiones y consumo), capturando la complejidad de la estratificación social más allá de aproximaciones unidimensionales.</p></li>
<li><p><strong>Categorización basada en la estructura social real</strong>: La utilización de percentiles específicos (25°, 60°, 85° y 95°) genera una distribución de clases sociales que refleja adecuadamente la estructura piramidal característica de sociedades latinoamericanas.</p></li>
<li><p><strong>Corrección de sesgos comunes</strong>: La metodología corrige la tendencia a sobreestimar el tamaño de las clases altas, un problema frecuente en los estudios de estratificación social.</p></li>
</ol>
<p>El indicador resultante proporciona una caracterización robusta de la posición social de los individuos y hogares, con aplicaciones potenciales en diversos campos de investigación social, desde estudios de movilidad social hasta análisis de desigualdad en salud, educación o patrones de consumo.</p>
</section>
<section id="referencias" class="level1 unnumbered">
<h1 class="unnumbered">Referencias</h1>
<div id="refs" role="list">

</div>
<section id="referencias-bibliográficas-completas" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="referencias-bibliográficas-completas"><span class="header-section-number">6.1</span> Referencias bibliográficas completas</h2>
<p>Bourdieu, P. (1984). <em>Distinction: A social critique of the judgement of taste</em>. Harvard University Press.</p>
<p>Espinoza, V., &amp; Barozet, E. (2012). ¿De qué hablamos cuando decimos “clase media”? Perspectivas sobre el caso chileno. <em>Revista UDP</em>, 9, 103-121.</p>
<p>Ganzeboom, H. B., De Graaf, P. M., &amp; Treiman, D. J. (1992). A standard international socio-economic index of occupational status. <em>Social Science Research</em>, 21(1), 1-56.</p>
<p>Grusky, D. B., &amp; Weeden, K. A. (2008). Are there social classes? A framework for testing sociology’s favorite concept. In <em>Social Class: How Does It Work?</em> (pp.&nbsp;65-89). Russell Sage Foundation.</p>
<p>OPR (2023). Occupational Prestige Ratings. https://occupational-prestige.github.io/opratings/index.html</p>
<p>Savage, M., Devine, F., Cunningham, N., Taylor, M., Li, Y., Hjellbrekke, J., … &amp; Miles, A. (2013). A new model of social class? Findings from the BBC’s Great British Class Survey experiment. <em>Sociology</em>, 47(2), 219-250.</p>
<p>Treiman, D. J. (1977). <em>Occupational prestige in comparative perspective</em>. Academic Press.</p>
<p>Veblen, T. (1899). <em>The theory of the leisure class: An economic study of institutions</em>. Macmillan.</p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>